# Discord ポモドーロタイマーボット

Discordのボイスチャンネルでポモドーロテクニックを実践するためのボットです。

## 機能

- 🍅 **ポモドーロタイマー**: 25分の集中時間と5分の休憩時間を4サイクル実行
- 🔇 **自動ミュート**: 集中時間中はボイスチャンネルの全メンバーをミュート
- 🔊 **自動アンミュート**: 休憩時間中はミュートを解除
- ⏸️ **一時停止/再開**: セッション中にタイマーを一時停止・再開可能
- ⏹️ **強制停止**: セッションを途中で停止可能
- 📊 **リアルタイム表示**: 残り時間をリアルタイムで更新表示
- 👥 **途中参加対応**: セッション中にボイスチャンネルに参加した場合も適切にミュート処理
- 🔄 **同時実行**: 複数のボイスチャンネルで同時にセッション実行可能

## セットアップ

### 1. 依存関係のインストール

```bash
npm install
```

### 2. 環境変数の設定

`.env.example` を `.env` にコピーして、以下の値を設定してください：

```env
DISCORD_TOKEN=your_bot_token_here
CLIENT_ID=your_client_id_here
```

### 3. Discord Bot の作成

1. [Discord Developer Portal](https://discord.com/developers/applications) にアクセス
2. 「New Application」をクリックしてアプリケーションを作成
3. 「Bot」タブでボットトークンを取得
4. 「OAuth2」タブで以下の権限を設定：
   - Bot Permissions:
     - Send Messages
     - Use Slash Commands
     - Connect
     - Speak
     - Mute Members
     - Move Members
   - Scopes:
     - bot
     - applications.commands

### 4. ボットの起動

```bash
npm start
```

開発環境では：

```bash
npm run dev
```

## 使用方法

### 基本的な使い方

1. ボイスチャンネルに参加
2. `/pomodoro` コマンドを実行
3. ボタンでタイマーを操作

### コマンド

- `/pomodoro [channel]` - ポモドーロセッションを開始
  - `channel` (オプション): 対象のボイスチャンネルを指定

### ボタン操作

- ⏸️ **一時停止** - タイマーを一時停止
- ▶️ **再開** - 一時停止中のタイマーを再開
- ⏹️ **停止** - セッションを強制終了

## タイマーの動作

### デフォルト設定
- 集中時間: 25分
- 休憩時間: 5分
- サイクル数: 4回

### セッションの流れ
1. 🍅 サイクル1 集中時間 (25分) - 全員ミュート
2. ☕ サイクル1 休憩時間 (5分) - ミュート解除
3. 🍅 サイクル2 集中時間 (25分) - 全員ミュート
4. ☕ サイクル2 休憩時間 (5分) - ミュート解除
5. 🍅 サイクル3 集中時間 (25分) - 全員ミュート
6. ☕ サイクル3 休憩時間 (5分) - ミュート解除
7. 🍅 サイクル4 集中時間 (25分) - 全員ミュート
8. 🎉 セッション完了

## 注意事項

- ボットには「メンバーをミュート」権限が必要です
- 1つのボイスチャンネルで同時に実行できるセッションは1つだけです
- セッション中にボイスチャンネルに参加した場合、集中時間中は自動的にミュートされます

## ライセンス

MIT License